<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMM Subscription Store</title>

<!-- GOOGLE FONTS -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
/* ===========================================================
   GLOBAL RESET + BASE STYLES
=========================================================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Inter", sans-serif;
}

body {
    background: #111;
    color: #fff;
}

/* ===========================================================
   HEADER + HAMBURGER
=========================================================== */

header {
    width: 100%;
    padding: 14px 18px;
    background: #181818;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid #222;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.hamburger {
    font-size: 26px;
    cursor: pointer;
    padding: 6px 10px;
    border-radius: 6px;
    transition: 0.2s ease;
}
.hamburger:hover {
    background: #222;
}

header h1 {
    font-size: 19px;
    font-weight: 600;
}

/* ===========================================================
   SLIDE-IN DRAWER (BUYER DASHBOARD)
=========================================================== */

.drawer-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(2px);
    display: none;
    z-index: 99;
}

.drawer {
    position: fixed;
    top: 0;
    left: -260px;
    width: 260px;
    height: 100%;
    background: #141414;
    padding: 22px 16px;
    display: flex;
    flex-direction: column;
    gap: 18px;
    transition: left 0.25s ease;
    z-index: 100;
    border-right: 1px solid #222;
}

.drawer.open {
    left: 0;
}

.drawer h2 {
    font-size: 18px;
    margin-bottom: 8px;
    font-weight: 600;
}

.drawer-item {
    padding: 10px 12px;
    background: #1c1c1c;
    border-radius: 6px;
    font-size: 15px;
    cursor: pointer;
    transition: 0.2s ease;
}
.drawer-item:hover {
    background: #292929;
}

/* ===========================================================
   CONTENT WRAPPER
=========================================================== */

.container {
    padding: 20px 15px;
}

/* ===========================================================
   CATEGORY FILTER TABS
=========================================================== */

.category-tabs {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    margin-bottom: 18px;
    padding-bottom: 6px;
}

.category-tab {
    white-space: nowrap;
    padding: 8px 14px;
    background: #1b1b1b;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: 0.2s;
    border: 1px solid #222;
}
.category-tab.active {
    background: #ff006a;
    border-color: #ff006a;
}

/* ===========================================================
   PRODUCT GRID + CARDS
=========================================================== */

.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(155px, 1fr));
    gap: 14px;
}

.product-card {
    background: #181818;
    padding: 14px;
    border-radius: 10px;
    border: 1px solid #222;
    cursor: pointer;
    transition: 0.2s ease;
}
.product-card:hover {
    background: #202020;
}

.product-icon {
    font-size: 32px;
    margin-bottom: 8px;
}

.product-name {
    font-size: 14px;
    font-weight: 600;
    min-height: 36px;
}

.stock-text {
    margin-top: 6px;
    font-size: 13px;
    opacity: 0.7;
}

/* ===========================================================
   PRODUCT MODAL
=========================================================== */

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(3px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 200;
}

.modal {
    width: 92%;
    max-width: 380px;
    background: #141414;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #222;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-close {
    font-size: 24px;
    cursor: pointer;
}

.modal-icon {
    font-size: 40px;
    margin-bottom: 12px;
}

.modal-title {
    font-size: 18px;
    font-weight: 600;
}

.modal-section {
    margin-top: 14px;
}

.section-title {
    font-size: 14px;
    margin-bottom: 6px;
    opacity: 0.8;
}

.select-box {
    width: 100%;
    padding: 10px;
    border-radius: 6px;
    background: #111;
    border: 1px solid #333;
    color: white;
    margin-bottom: 10px;
}

/* ===========================================================
   CHECKOUT BUTTON
=========================================================== */

.buy-btn {
    width: 100%;
    margin-top: 14px;
    padding: 12px;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    background: #ff006a;
    color: white;
    transition: 0.2s;
}
.buy-btn:disabled {
    background: #444;
    cursor: not-allowed;
}

/* ===========================================================
    TOAST NOTIFICATIONS
=========================================================== */

.toast {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    background: #ff006a;
    padding: 12px 18px;
    border-radius: 8px;
    font-size: 14px;
    display: none;
    z-index: 500;
}

/* ===========================================================
   RESPONSIVE FIXES
=========================================================== */

@media (min-width: 820px) {
    .drawer {
        width: 260px;
    }
}
</style>

</head>

<body>

<!-- Header -->
<header>
    <div class="header-left">
        <div class="hamburger" onclick="openDrawer()">☰</div>
        <h1>SMM Subscription Store</h1>
    </div>
</header>

<!-- Drawer Sidebar -->
<div class="drawer-overlay" onclick="closeDrawer()"></div>

<div class="drawer" id="drawer">
    <h2>Dashboard</h2>
    <div class="drawer-item" onclick="showRules()">Rules</div>
    <div class="drawer-item" onclick="showFeedback()">Feedback</div>
    <div class="drawer-item" onclick="showOrders()">My Orders</div>
    <div class="drawer-item" onclick="showDelivered()">Delivered</div>
</div>

<!-- Main Content -->
<div class="container">

    <!-- Category Tabs -->
    <div class="category-tabs" id="categoryTabs"></div>

    <!-- Product Grid -->
    <div class="product-grid" id="productGrid"></div>
</div>

<div class="toast" id="toast"></div>

<!-- Modal -->
<div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="productModal">
        <div class="modal-header">
            <h2 class="modal-title" id="modalTitle"></h2>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>

        <div class="modal-icon" id="modalIcon"></div>

        <div class="modal-section">
            <div class="section-title">Account Type</div>
            <select id="accTypeSelect" class="select-box"></select>

            <div class="section-title">Duration</div>
            <select id="durationSelect" class="select-box"></select>

            <div class="section-title">Price</div>
            <div id="modalPrice" style="font-size:16px; font-weight:600; margin-top:5px;">₱0</div>

            <button class="buy-btn" id="buyBtn">Checkout</button>
        </div>
    </div>
</div>

<script>
// ===============================================================
// PRODUCT DATA (FULL PRICING + CATEGORIES)
// ===============================================================
const PRODUCTS_DATA = [
    // put EXACTLY your full PRODUCTS_DATA array here (unchanged)
];

// ===============================================================
// CONSTANTS
// ===============================================================
const ACC_TYPES = ["Solo Account","Shared Account","Solo Profile","Shared Profile"];
const DURATIONS = ["7d","14d","1m","2m","3m","4m","5m","6m","7m","8m","9m","10m","11m","12m","24m","NW","3m W","6m W","12m W"];

// ===============================================================
// DOM ELEMENTS
// ===============================================================
const categoryTabs = document.getElementById("categoryTabs");
const productGrid = document.getElementById("productGrid");
const modalOverlay = document.getElementById("modalOverlay");
const modalTitle = document.getElementById("modalTitle");
const modalIcon = document.getElementById("modalIcon");
const accTypeSelect = document.getElementById("accTypeSelect");
const durationSelect = document.getElementById("durationSelect");
const modalPrice = document.getElementById("modalPrice");
const buyBtn = document.getElementById("buyBtn");
const toast = document.getElementById("toast");

// drawer
const drawer = document.getElementById("drawer");
const drawerOverlay = document.querySelector(".drawer-overlay");

let selectedProduct = null;

// ===============================================================
// SHOW TOAST
// ===============================================================
function showToast(msg) {
    toast.innerText = msg;
    toast.style.display = "block";

    setTimeout(() => {
        toast.style.display = "none";
    }, 2000);
}

// ===============================================================
// DRAWER
// ===============================================================
function openDrawer() {
    drawer.classList.add("open");
    drawerOverlay.style.display = "block";
}

function closeDrawer() {
    drawer.classList.remove("open");
    drawerOverlay.style.display = "none";
}

// dummy
function showRules() { showToast("Rules"); }
function showFeedback() { showToast("Feedback"); }
function showOrders() { showToast("My Orders"); }
function showDelivered() { showToast("Delivered"); }

// ===============================================================
// RENDER CATEGORY TABS
// ===============================================================
function renderCategories() {
    const cats = [...new Set(PRODUCTS_DATA.map(p => p.category))];

    categoryTabs.innerHTML = "";

    const allTab = document.createElement("div");
    allTab.className = "category-tab active";
    allTab.innerText = "All";
    allTab.onclick = () => filterCategory("All");
    categoryTabs.appendChild(allTab);

    cats.forEach(cat => {
        const tab = document.createElement("div");
        tab.className = "category-tab";
        tab.innerText = cat.charAt(0).toUpperCase() + cat.slice(1);
        tab.onclick = () => filterCategory(cat);
        categoryTabs.appendChild(tab);
    });
}

// ===============================================================
// FILTER BY CATEGORY
// ===============================================================
function filterCategory(cat) {
    document.querySelectorAll(".category-tab").forEach(t => t.classList.remove("active"));
    [...categoryTabs.children].find(t => t.innerText.toLowerCase() === cat.toLowerCase()).classList.add("active");

    if (cat === "All") {
        renderProducts(PRODUCTS_DATA);
    } else {
        renderProducts(PRODUCTS_DATA.filter(p => p.category === cat));
    }
}

// ===============================================================
// RENDER PRODUCT GRID
// ===============================================================
function renderProducts(list) {
    productGrid.innerHTML = "";

    list.forEach(p => {
        const card = document.createElement("div");
        card.className = "product-card";
        card.onclick = () => openModal(p);

        card.innerHTML = `
            <div class="product-icon">${p.icon}</div>
            <div class="product-name">${p.name}</div>
            <div class="stock-text">Stock: ${p.stock}</div>
        `;

        productGrid.appendChild(card);
    });
}

// ===============================================================
// OPEN MODAL
// ===============================================================
function openModal(product) {
    selectedProduct = product;

    modalTitle.innerText = product.name;
    modalIcon.innerHTML = product.icon;

    // fill account types only available for the product
    accTypeSelect.innerHTML = "";
    Object.keys(product.pricing).forEach(type => {
        let opt = document.createElement("option");
        opt.value = type;
        opt.innerText = type;
        accTypeSelect.appendChild(opt);
    });

    // fill durations based on first acc type
    fillDurations();

    // evaluate price
    updatePrice();

    // stock check
    if (product.stock <= 0) {
        buyBtn.disabled = true;
        buyBtn.innerText = "Out of Stock";
    } else {
        buyBtn.disabled = false;
        buyBtn.innerText = "Checkout";
    }

    modalOverlay.style.display = "flex";
}

// ===============================================================
// FILL DURATION OPTIONS BASED ON SELECTED ACCOUNT TYPE
// ===============================================================
function fillDurations() {
    durationSelect.innerHTML = "";

    const accType = accTypeSelect.value;
    const productPricing = selectedProduct.pricing[accType];

    Object.keys(productPricing).forEach(d => {
        let opt = document.createElement("option");
        opt.value = d;
        opt.innerText = d;
        durationSelect.appendChild(opt);
    });
}

// ===============================================================
// UPDATE PRICE WHEN ACC/ DURATION CHANGES
// ===============================================================
accTypeSelect.addEventListener("change", () => {
    fillDurations();
    updatePrice();
});

durationSelect.addEventListener("change", updatePrice);

function updatePrice() {
    const accType = accTypeSelect.value;
    const duration = durationSelect.value;

    if (!accType || !duration) return;

    const price = selectedProduct.pricing[accType][duration];
    modalPrice.innerText = "₱" + price;
}

// ===============================================================
// CLOSE MODAL
// ===============================================================
function closeModal() {
    modalOverlay.style.display = "none";
}

// ===============================================================
// CHECKOUT BUTTON
// ===============================================================
buyBtn.addEventListener("click", () => {
    if (!selectedProduct) return;

    if (selectedProduct.stock <= 0) {
        showToast("Out of stock");
        return;
    }

    showToast("Order Created!");
    closeModal();
});

// ===============================================================
// INIT
// ===============================================================
renderCategories();
renderProducts(PRODUCTS_DATA);

</script>
</body>
</html>
